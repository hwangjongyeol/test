<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>25ë…„ 6ì›” 25ì¼ - ë‹¨ì–´ì¥</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .options, .word-list, .popup, .controls {
      max-width: 600px;
      margin: 20px auto;
    }
    .options label {
      margin-right: 10px;
    }
    .word {
      border: 1px solid #ccc;
      padding: 8px 12px;
      margin-bottom: 8px;
      border-radius: 8px;
      background-color: #fff;
      cursor: pointer;
      font-size: 0.95em;
      line-height: 1.4em;
    }
    .hidden {
      visibility: hidden;
    }
    .popup {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    .popup-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      position: relative;
      width: 90%;
      max-width: 400px;
    }
    .popup-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      color: #999;
    }
    .popup-close:hover {
      color: #333;
    }
    .btn {
      display: inline-block;
      margin: 10px;
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>ğŸ“˜ ëœë¤ ë‹¨ì–´ì¥</h1>

  <div class="options">
    <label><input type="checkbox" id="hideWord" > ë‹¨ì–´ ìˆ¨ê¸°ê¸°</label>
    <label><input type="checkbox" id="hideReading" > ì½ëŠ” ë²• ìˆ¨ê¸°ê¸°</label>
    <label><input type="checkbox" id="hideMeaning" > ì˜ë¯¸ ìˆ¨ê¸°ê¸°</label>
  </div>

  <div class="controls">
    <button class="btn" onclick="showRandomWord()">ğŸ² ëœë¤ ë‹¨ì–´ ë³´ê¸°</button>
    <button class="btn" onclick="renderWords(true)">ğŸ”€ ë¦¬ìŠ¤íŠ¸ ëœë¤ ë³´ê¸°</button>
  </div>

  <div class="word-list" id="wordList"></div>

  <div class="popup" id="popup">
    <div class="popup-content" id="popupContent">
      <div class="popup-close" onclick="closePopup()">&times;</div>
      <div id="popupWord" style="font-size: 1.5em; margin: 10px 0;"></div>
      <div id="popupReading" style="margin: 5px 0;"></div>
      <div id="popupMeaning" style="font-size: 1.2em; margin: 10px 0;"></div>
      <button class="btn" onclick="showRandomWord()">ë‹¤ìŒ â–¶ï¸</button>
    </div>
  </div>

<script>
  const words = [
    { "word": "when", "reading": "ì›¬", "meaning": "ì–¸ì œ" },
    { "word": "already", "reading": "ì–¼ë ˆë””", "meaning": "ì´ë¯¸" },
    { "word": "work", "reading": "ì›Œí¬", "meaning": "ì¼í•˜ë‹¤ / ì¼" },
    { "word": "still", "reading": "ìŠ¤í‹¸", "meaning": "ì•„ì§ë„ / ì—¬ì „íˆ" },
    { "word": "some thing", "reading": "ì¸ì”½", "meaning": "ë¬´ì–¸ê°€" },
    { "word": "strange", "reading": "ìŠ¤íŠ¸ë ˆì¸ì§€", "meaning": "ì´ìƒí•œ" },
    { "word": "between", "reading": "ë¹„íŠ¸ìœˆ", "meaning": "~ì‚¬ì´ì—" },
    { "word": "if", "reading": "ì´í”„", "meaning": "ë§Œì•½ì—" },
    { "word": "eat", "reading": "ì‡", "meaning": "ë¨¹ë‹¤" },
    { "word": "take", "reading": "í…Œì´í¬", "meaning": "ê°€ì§€ë‹¤ / ë°ë ¤ê°€ë‹¤" },
    { "word": "scientist", "reading": "ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸", "meaning": "ê³¼í•™ì" },
    { "word": "fix", "reading": "í”½ìŠ¤", "meaning": "ê³ ì¹˜ë‹¤ / ìˆ˜ë¦¬í•˜ë‹¤" },
    { "word": "little", "reading": "ë¦¬í‹€", "meaning": "ì‘ì€" }
  ];

  let showingFull = false;
  let currentWord = null;
  let unseenWords = [...words]; // ì²˜ìŒì—” ì „ì²´ ë‹¨ì–´ë¡œ ì‹œì‘

  function shuffle(array) {
    return array.map(a => [Math.random(), a])
                .sort((a, b) => a[0] - b[0])
                .map(a => a[1]);
  }

  function renderWords(randomize = false) {
    const list = document.getElementById('wordList');
    list.innerHTML = '';
    const hideWord = document.getElementById('hideWord').checked;
    const hideReading = document.getElementById('hideReading').checked;
    const hideMeaning = document.getElementById('hideMeaning').checked;

    const displayWords = randomize ? shuffle([...words]) : words;

    displayWords.forEach(w => {
      const div = document.createElement('div');
      div.className = 'word';

      const wordEl = document.createElement('div');
      wordEl.textContent = w.word;
      if (hideWord) wordEl.classList.add('hidden');

      const readingEl = document.createElement('div');
      readingEl.textContent = `[${w.reading}]`;
      if (hideReading) readingEl.classList.add('hidden');

      const meaningEl = document.createElement('div');
      meaningEl.textContent = w.meaning;
      if (hideMeaning) meaningEl.classList.add('hidden');

      div.appendChild(wordEl);
      div.appendChild(readingEl);
      div.appendChild(meaningEl);

      div.onclick = () => {
        wordEl.classList.remove('hidden');
        readingEl.classList.remove('hidden');
        meaningEl.classList.remove('hidden');
      };

      list.appendChild(div);
    });
  }

  function showRandomWord() {
    if (unseenWords.length === 0) {
      // ë‹¤ ë³¸ ê²½ìš°
      document.getElementById('popupWord').innerText = 'ğŸ‘ ëª¨ë‘ ì™„ë£Œ!';
      document.getElementById('popupReading').innerText = '';
      document.getElementById('popupMeaning').innerText = 'ë‹¨ì–´ë¥¼ ëª¨ë‘ ë³´ì•˜ìŠµë‹ˆë‹¤!';
      document.getElementById('popup').style.display = 'flex';
      return;
    }

    const randomIndex = Math.floor(Math.random() * unseenWords.length);
    const w = unseenWords.splice(randomIndex, 1)[0]; // ì„ íƒ í›„ ì œê±°
    currentWord = w;
    showingFull = false;

    const hideWord = Math.random() < 0.5;

    document.getElementById('popupWord').innerText = hideWord ? '?' : w.word;
    document.getElementById('popupReading').innerText = hideWord ? '' : `[${w.reading}]`;
    document.getElementById('popupMeaning').innerText = hideWord ? w.meaning : '?';

    document.getElementById('popupWord').onclick = revealPopupFull;
    document.getElementById('popupMeaning').onclick = revealPopupFull;
    document.getElementById('popupReading').onclick = revealPopupFull;

    document.getElementById('popup').style.display = 'flex';
  }

  function revealPopupFull() {
    if (showingFull || !currentWord) return;
    showingFull = true;
    document.getElementById('popupWord').innerText = currentWord.word;
    document.getElementById('popupReading').innerText = `[${currentWord.reading}]`;
    document.getElementById('popupMeaning').innerText = currentWord.meaning;
  }

  function closePopup() {
    document.getElementById('popup').style.display = 'none';
  }

  document.getElementById('hideWord').onchange = () => renderWords();
  document.getElementById('hideReading').onchange = () => renderWords();
  document.getElementById('hideMeaning').onchange = () => renderWords();

  renderWords();
</script>
</body>
</html>
